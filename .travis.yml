# use c and gcc
language: c
compiler: gcc

# only build branches on whitelist
#branches:
#  only:
#    - setup-ci
#    - master

# install all vnc-related dependencies
before_install:
  - sudo apt-get install libcairo2-dev
  - git clone git://github.com/cmujedi/libguac.git
  - cd libguac
  - autoreconf -i
  - ./configure
  - make
  - sudo make install
  - sudo ldconfig
  - sudo apt-get install tomcat6
  - sudo apt-get install libvncserver0
  - sudo apt-get install libvncserver-dev
  - sudo apt-get install libfreerdp1
  - sudo apt-get install libvorbisenc2

# before build script, run autoreconf
before_script: autoreconf -i

# Default is "./configure && make && make test", but no tests yet
script: "./configure && make"

# after build script, run make install
after_success: sudo make install

# add notification email addresses
notifications:
  email:
    recipients:
      - cmujedi@west.cmu.edu
